{
  "namespace": "NUXP",
  "routes": [
    {
      "name": "GetSelection",
      "method": "GET",
      "path": "/api/selection",
      "description": "Get all currently selected art objects as handle IDs. Wraps AIMatchingArtSuite::GetSelectedArt (AIArtHandle*** output). Handler must iterate, register each handle, and free with MdMemoryDisposeHandle.",
      "response": {
        "handles": { "type": "number[]", "description": "Array of art handle IDs registered with HandleManager::art" },
        "count": { "type": "number", "description": "Number of selected objects" }
      }
    },
    {
      "name": "GetMatchingArt",
      "method": "POST",
      "path": "/api/selection/match",
      "description": "Get art objects matching type and attribute filters. Wraps AIMatchingArtSuite::GetMatchingArt with AIMatchingArtSpec.",
      "request": {
        "type": { "type": "number", "description": "AIArtType enum: 0=unknown, 1=group, 2=path, 3=compoundPath, 7=placed, 9=raster, 10=plugin, 11=mesh, 12=textFrame, 13=symbol, -1=any" },
        "whichAttr": { "type": "number", "description": "Which attribute to filter on (bitmask). 0 means no attribute filter.", "optional": true },
        "attr": { "type": "number", "description": "Attribute value to match. 0 = NOT set, nonzero = set.", "optional": true }
      },
      "response": {
        "handles": { "type": "number[]", "description": "Array of matching art handle IDs" },
        "count": { "type": "number", "description": "Number of matching objects" }
      }
    },
    {
      "name": "GetPathStyle",
      "method": "GET",
      "path": "/api/art/{id}/style",
      "pathParams": {
        "id": { "type": "string", "description": "Art handle ID from HandleManager::art" }
      },
      "description": "Get fill and stroke style of an art object. Wraps AIPathStyleSuite::GetPathStyle. Color is a tagged union — check color.kind to determine which fields are present (gray/rgb/cmyk/pattern/gradient/custom/none).",
      "response": {
        "fillPaint": { "type": "boolean", "description": "Whether the object has a fill" },
        "strokePaint": { "type": "boolean", "description": "Whether the object has a stroke" },
        "fill": { "type": "object", "description": "{ color: { kind: string, ...variant fields }, overprint: boolean }" },
        "stroke": { "type": "object", "description": "{ color: { kind: string, ... }, overprint: boolean, width: number, cap: number, join: number, miterLimit: number, dash: { length: number, offset: number, array: number[] } }" },
        "evenodd": { "type": "boolean", "description": "Even-odd fill rule (vs non-zero winding)" },
        "resolution": { "type": "number", "description": "Path output resolution (default 800.0)" }
      }
    },
    {
      "name": "SetPathStyle",
      "method": "POST",
      "path": "/api/art/{id}/style",
      "pathParams": {
        "id": { "type": "string", "description": "Art handle ID from HandleManager::art" }
      },
      "description": "Set fill and stroke style for an art object. Wraps AIPathStyleSuite::SetPathStyle. All fields optional — only provided fields are changed. For color, include kind + variant fields.",
      "request": {
        "fillPaint": { "type": "boolean", "description": "Whether to fill", "optional": true },
        "strokePaint": { "type": "boolean", "description": "Whether to stroke", "optional": true },
        "fill": { "type": "object", "description": "{ color: { kind, ...variant }, overprint?: boolean }", "optional": true },
        "stroke": { "type": "object", "description": "{ color?: { kind, ... }, overprint?: boolean, width?: number, cap?: number, join?: number, miterLimit?: number, dash?: { length, offset, array } }", "optional": true },
        "evenodd": { "type": "boolean", "description": "Even-odd fill rule", "optional": true }
      },
      "response": {
        "success": { "type": "boolean", "description": "Whether the style was applied" }
      }
    },
    {
      "name": "GetPathSegments",
      "method": "GET",
      "path": "/api/art/{id}/segments",
      "pathParams": {
        "id": { "type": "string", "description": "Art handle ID (must be path art)" }
      },
      "description": "Get all path segments for a path art object. Wraps AIPathSuite::GetPathSegmentCount + GetPathSegments. Each segment has anchor (p), incoming handle (in), outgoing handle (out), and corner flag.",
      "response": {
        "count": { "type": "number", "description": "Number of segments" },
        "closed": { "type": "boolean", "description": "Whether the path is closed" },
        "segments": { "type": "object", "description": "Array of { p: {h,v}, in: {h,v}, out: {h,v}, corner: boolean }" }
      }
    },
    {
      "name": "SetPathSegments",
      "method": "POST",
      "path": "/api/art/{id}/segments",
      "pathParams": {
        "id": { "type": "string", "description": "Art handle ID (must be path art)" }
      },
      "description": "Set path segments for a path art object. Wraps AIPathSuite::SetPathSegments. Replaces segments starting at given index.",
      "request": {
        "startIndex": { "type": "number", "description": "Starting segment index (0-based)", "optional": true },
        "segments": { "type": "object", "description": "Array of { p: {h,v}, in: {h,v}, out: {h,v}, corner: boolean }" },
        "closed": { "type": "boolean", "description": "Set path closed/open state", "optional": true }
      },
      "response": {
        "success": { "type": "boolean", "description": "Whether segments were set" }
      }
    }
  ]
}
